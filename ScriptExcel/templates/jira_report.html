.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reporte Jira - Bug #{{ bug.bug_number }}</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { background-color: #f8f9fa; }
        .card { margin-bottom: 20px; }
        pre { 
            white-space: pre-wrap; 
            background-color: #f5f5f5;
            padding: 15px;
            border-radius: 5px;
            border: 1px solid #ddd;
        }
        #copyMessage {
            display: none;
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px;
            background-color: #28a745;
            color: white;
            border-radius: 5px;
            z-index: 1000;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
        }
    </style>
</head>
<body>
    <div class="container mt-5 mb-5">
        <div class="card">
            <div class="card-header bg-primary text-white">
                <h2>Reporte Jira para Bug #{{ bug.bug_number }}</h2>
            </div>
            <div class="card-body">
                <p class="alert alert-info">
                    <i class="fas fa-info-circle"></i> A continuación se muestra el formato para crear un ticket en Jira. Puedes copiar este contenido y pegarlo directamente en el sistema de Jira de Motorola.
                </p>

                <div class="mb-4">
                    <h4>Vista previa:</h4>
                    <div class="card">
                        <div class="card-header bg-light">
                            <h5>[{{ bug.bug_number }}] {{ bug.name }}</h5>
                        </div>
                        <div class="card-body">
                            <p><strong>Tipo de problema:</strong> Bug</p>
                            <p><strong>Prioridad:</strong> {{ bug.priority or 'Media' }}</p>
                            <p><strong>Tecnología:</strong> {{ bug.technology or 'No especificada' }}</p>
                            <p><strong>Descubierto en:</strong> {{ bug.discovery_date or 'No especificada' }}</p>
                            <p><strong>Versión afectada:</strong> {{ bug.raised_in or 'No especificada' }}</p>
                            <hr>
                            <h6>Descripción:</h6>
                            <p>{{ bug.description or 'Sin descripción' }}</p>
                            {% if bug.comments %}
                            <h6>Comentarios adicionales:</h6>
                            <p>{{ bug.comments }}</p>
                            {% endif %}
                        </div>
                    </div>
                </div>

                <h4>Formato para copiar:</h4>
                <div class="mb-3">
                    <button id="copyBtn" class="btn btn-success mb-2" onclick="copyJiraFormat()">
                        <i class="fas fa-copy"></i> Copiar al portapapeles
                    </button>
                    <pre id="jiraFormat">Resumen: [{{ bug.bug_number }}] {{ bug.name }}

Tipo: Bug

Prioridad: {{ bug.priority or 'Media' }}

Tecnología: {{ bug.technology or 'No especificada' }}

Versión afectada: {{ bug.raised_in or 'No especificada' }}

Descubierto en fecha: {{ bug.discovery_date or 'No especificada' }}

Descripción:
{{ bug.description or 'Sin descripción disponible' }}

{% if bug.comments %}Comentarios adicionales:
{{ bug.comments }}{% endif %}

ID Defecto: {{ bug.defect_id or 'No asignado' }}

Estado actual: {{ bug.bug_status }}
</pre>
                </div>

                <div class="d-flex justify-content-between mt-4">
                    <a href="javascript:history.back()" class="btn btn-secondary">Volver atrás</a>
                    <a href="{{ url_for('upload_file') }}" class="btn btn-primary">Ir a Inicio</a>
                </div>
            </div>
        </div>
    </div>

    <div id="copyMessage">¡Copiado al portapapeles!</div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
    <script>
        function copyJiraFormat() {
            const textToCopy = document.getElementById('jiraFormat').textContent;
            navigator.clipboard.writeText(textToCopy)
                .then(() => {
                    const message = document.getElementById('copyMessage');
                    message.style.display = 'block';
                    setTimeout(() => {
                        message.style.display = 'none';
                    }, 2000);
                })
                .catch(err => {
                    console.error('Error al copiar: ', err);
                    alert('No se pudo copiar al portapapeles. Por favor, selecciona y copia manualmente.');
                });
        }
    </script>
</body>
</html>